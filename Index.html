<!DOCTYPE html>
<html>
 
<head>
    <title>Dropdown Menu</title>
</head>
 
<body>
    <div>
        <button onclick="test()">Test</button>
    </div>
    <iframe width="600" height="600">
 
    </iframe>
    <script>
 
        let chartHtml = '<html><body>\n';
        chartHtml += "#PLACEHOLDER#"
        chartHtml += '<script type=\'module\'> import mermaid from \'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs\';'
        chartHtml += 'mermaid.initialize({startOnLoad: true })<\/script><\/body><\/html>';
 
        let flowChartTag = '<pre class=\'mermaid\'>flowchart TD \n';
        flowChartTag += 'Start --> Stop';
        flowChartTag += '\n</pre>'
        var isFlowChart = true;
        let sequenceTag = '<pre class=\'mermaid\'>sequenceDiagram \n';
        sequenceTag += 'participant Alice';
        sequenceTag += '\nparticipant Bob';
        sequenceTag += '\nAlice->>Bob: Hi Bob';
        sequenceTag += '\nBob->>Alice: Hi Alice';
        sequenceTag += '\n</pre>'
        function GenerateChart() {
 
 
            // Create a new blob with the HTML content of the new_mermaid element
            const blob = new Blob([GetHtmlContent()], { type: 'text/html' });
 
            // Create a URL for the blob
            const url = URL.createObjectURL(blob);
            // Get the iframe element
            const iframe = document.querySelector("iframe");
 
            // Set the source of the iframe to the URL of the blob
            iframe.src = url;
        }
 
        //   document.body.addEventListener("click", GenerateChart);
 
 
        function GetHtmlContent() {
            var selChartVal = flowChartTag;
            if (!isFlowChart) {
                selChartVal = sequenceTag;
            }
            let chartHtml = '<html><body>\n';
            chartHtml += selChartVal;
            chartHtml += '<script type=\'module\'> import mermaid from \'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs\';'
            chartHtml += 'mermaid.initialize({startOnLoad: true })<\/script><\/body><\/html>';
            console.log(chartHtml);
            return chartHtml;
        }
 
        function test() {
            isFlowChart = !isFlowChart;
            GenerateChart();
        }
    </script>
 
</body>
 
</html>